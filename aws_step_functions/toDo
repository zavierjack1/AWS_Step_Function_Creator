add validation on states with NextOrEnd